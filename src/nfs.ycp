/**
 * File:
 *   nfs.ycp
 *
 * Module:
 *   Configuration of nfs
 *
 * Summary:
 *   Main file
 *
 * Authors:
 *   Jan Holesovsky <kendy@suse.cz>
 *   Dan Vesely <dan@suse.cz>
 *   Martin Vidner <mvidner@suse.cz>
 *
 * $Id$
 *
 * Module for the configuration of the nfs client
 *
 */

/***
 * <h3>Configuration of the nfs</h3>
 */

{

    textdomain "nfs";

    import "Nfs";
    import "Wizard";
    import "Popup";
    import "Sequencer";

    include "nfs/ui.ycp";
    include "nfs/routines.ycp";

    map Aliases = $[
	"fstab"   : ``(FstabDialog ()),
//	"end"     : ``(SaveDialog ())
	];

    map Sequence = $[
	"ws_start"  : "fstab",
	"fstab"       : $[
	    `next   : `next,
	    `abort  : `abort
	    ],
/*
	"end"       : $[
	    `finish    : `ws_finish
	    ]
*/
	];

    if (!IsPortmapInstalled())
    {
	return;
    }

    Nfs::Read();

    Wizard::CreateDialog ();
    Wizard::SetDesktopIcon("nfs");

    any result = Sequencer::Run(Aliases, Sequence);

    if (result == `next)
    {
	Nfs::Write();
    }

    UI::CloseDialog();
}
